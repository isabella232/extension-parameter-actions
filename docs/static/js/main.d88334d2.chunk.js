(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,a){},134:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(13),l=a(14),i=a(16),r=a(15),s=a(17),o=(a(74),a(0)),c=a(69),u=a(18),d=a(72),f=a(6),m=function(e){return o.createElement("div",{className:"selected"},o.createElement("p",null,o.createElement("i",null,"The ",e.selecting," ",o.createElement("b",null,e.selected)," has been selected")),o.createElement(f.Button,{onClick:e.onClear,style:{display:e.nextConfig?"none":"block",marginLeft:"12px"}},"Clear"))};m.displayName="Selected";var h=function(e){var t={className:"dropdown-select",disabled:!e.enabled,kind:"line",onChange:e.onChange,onSelect:e.onChange,value:e.selected},a={disabled:!e.enabled||""===e.selected,kind:"filledGreen",onClick:e.onClick,style:{marginLeft:"12px"}};return o.createElement("div",{className:"controls"},o.createElement(f.DropdownSelect,t,e.list.map(function(e){return o.createElement("option",{key:e},e)})),o.createElement(f.Button,a,"Set"))};h.displayName="Selector";var g,p=function(e){return o.createElement("div",{className:"select"},o.createElement("p",null,"Select a ",e.selecting),function(e){var t=e.config,a=e.enabled,n=e.list,l=e.nextConfig,i=e.onChange,r=e.onClear,s=e.onClick,c=e.selected,u=e.selecting;return t?o.createElement(m,{nextConfig:l,onClear:r,selected:c,selecting:u}):o.createElement(h,{enabled:a,list:n,onChange:i,onClick:s,selected:c})}(e))};p.displayName="Setting";var v,y,w=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).state={configured:!1,dataType:"string",delimiter:"|",field:"",field_config:!1,field_enabled:!1,field_list:[],keepOnDeselect:!1,multiselect:!1,param_config:!1,param_enabled:!1,param_list:[],parameter:"",worksheets:[],ws_config:!1,ws_enabled:!1,ws_list:[]},a.paramChange=function(e){a.setState({parameter:e.target.value})},a.fieldChange=function(e){a.setState({field:e.target.value})},a.multiChange=function(e){a.setState({multiselect:e.target.checked})},a.deselectChange=function(e){a.setState({keepOnDeselect:e.target.checked})},a.delimiterChange=function(e){a.setState({delimiter:e.target.value})},a.handleCheckWrapper=function(e){return function(t){var n=a.state.worksheets;n.find(function(t){return t.key===e}).included=t.target.checked,a.setState({worksheets:n})}},a.clearWS=function(){a.setState({configured:!1,field_enabled:!1,ws_config:!1,ws_enabled:!0}),a.populateWS()},a.setField=function(){""!==a.state.field&&(a.setState({field_config:!0,field_enabled:!1}),a.testWSSettings())},a.clearField=function(){a.setState({configured:!1,field_config:!1,field_enabled:!0,worksheets:[],ws_enabled:!1}),a.populateFieldList()},a.setParam=function(){""!==a.state.parameter&&(a.setState({param_config:!0,param_enabled:!1}),a.testFieldSettings())},a.clearParam=function(){a.setState({dataType:"string",field:"",field_enabled:!1,param_config:!1,param_enabled:!0}),a.populateParamList()},a.submit=function(){window.tableau.extensions.settings.set("parameter",a.state.parameter),window.tableau.extensions.settings.set("delimiter",a.state.delimiter),window.tableau.extensions.settings.set("worksheets",JSON.stringify(a.state.worksheets)),window.tableau.extensions.settings.set("field",a.state.field),window.tableau.extensions.settings.set("keepOnDeselect",JSON.stringify(a.state.keepOnDeselect)),window.tableau.extensions.settings.set("multiselect",JSON.stringify(a.state.multiselect&&"string"===a.state.dataType)),window.tableau.extensions.settings.set("configured","true"),window.tableau.extensions.settings.saveAsync().then(function(){window.tableau.extensions.ui.closeDialog("true")})},a.clearSettings=function(){a.setState({configured:!1,dataType:"string",field:"",field_config:!1,field_enabled:!1,field_list:[],multiselect:!1,param_config:!1,param_enabled:!1,param_list:[],parameter:"",worksheets:[],ws_config:!1,ws_enabled:!1,ws_list:[]}),a.populateParamList()},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"testWSSettings",value:function(){var e=this,t=window.tableau.extensions.settings.getAll();if(this.state.configured){var a=JSON.parse(t.worksheets),n=[],l=[],i=[];g.worksheets.forEach(function(e){l.push(e.name),n.push(e.getSummaryDataAsync())}),Promise.all(n).then(function(t){var n=function(n){if(t.hasOwnProperty(n)){var r=!0,s=!1,o=void 0;try{for(var c,u=t[n].columns[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){if(c.value.fieldName===e.state.field){var d=!1;a.find(function(e){return e.worksheet===l[n]})&&(d=a.find(function(e){return e.worksheet===l[n]}).included),i.push({key:n,included:d,worksheet:l[n]})}}}catch(f){s=!0,o=f}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}}};for(var r in t)n(r);e.setState({worksheets:i,ws_enabled:!1})})}else this.populateWS()}},{key:"populateWS",value:function(){var e=this,t=[],a=[],n=[];g.worksheets.forEach(function(e){a.push(e.name),t.push(e.getSummaryDataAsync())}),Promise.all(t).then(function(t){for(var l in t)if(t.hasOwnProperty(l)){var i=!0,r=!1,s=void 0;try{for(var o,c=t[l].columns[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){o.value.fieldName===e.state.field&&n.push({key:l,included:!0,worksheet:a[l]})}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}}e.setState({worksheets:n,ws_enabled:!1})})}},{key:"testFieldSettings",value:function(){var e=this,t=window.tableau.extensions.settings.getAll();if(this.state.configured){var a,n=t.field;g.findParameterAsync(this.state.parameter).then(function(t){a=t.dataType,e.setState({dataType:a})}).then(function(){var t=!1,l=[];g.worksheets.forEach(function(e){l.push(e.getSummaryDataAsync())}),Promise.all(l).then(function(l){var i=!0,r=!1,s=void 0;try{for(var o,c=l[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value,d=!0,f=!1,m=void 0;try{for(var h,g=u.columns[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var p=h.value;if(p.fieldName===n&&p.dataType===a){t=!0;break}}}catch(v){f=!0,m=v}finally{try{d||null==g.return||g.return()}finally{if(f)throw m}}if(t)break}}catch(v){r=!0,s=v}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}t?(e.setState({field:n,field_config:!0,field_enabled:!1}),e.testWSSettings()):e.populateFieldList()})})}else this.populateFieldList()}},{key:"populateFieldList",value:function(){var e,t=this;g.findParameterAsync(this.state.parameter).then(function(a){e=a.dataType,t.setState({dataType:e})}).then(function(){var a=[],n=[];g.worksheets.forEach(function(e){a.push(e.getSummaryDataAsync())}),Promise.all(a).then(function(a){var l=!0,i=!1,r=void 0;try{for(var s,o=a[Symbol.iterator]();!(l=(s=o.next()).done);l=!0){var c=s.value,u=!0,d=!1,f=void 0;try{for(var m,h=c.columns[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var g=m.value;g.dataType===e&&"Measure Names"!==g.fieldName&&"Measure Values"!==g.fieldName&&n.push(g.fieldName)}}catch(k){d=!0,f=k}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}}catch(k){i=!0,r=k}finally{try{l||null==o.return||o.return()}finally{if(i)throw r}}for(var p=[],v=0,y=n;v<y.length;v++){var w=y[v];p.push(w)}if(p.length>0)t.setState({field:p[0],field_enabled:!0,field_list:p});else{var b="No ".concat(e," fields in dashboard worksheets!");t.setState({field:b,field_enabled:!1,field_list:[b]})}})})}},{key:"testParamSettings",value:function(){var e=this,t=window.tableau.extensions.settings.getAll();if(this.state.configured){var a=t.parameter;g.findParameterAsync(a).then(function(t){t&&"all"===t.allowableValues.type?(e.setState({param_config:!0,param_enabled:!1,parameter:t.name}),e.testFieldSettings()):e.populateParamList()})}else this.populateParamList()}},{key:"populateParamList",value:function(){var e=this;g.getParametersAsync().then(function(t){var a=[],n=!0,l=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var o=r.value;"all"===o.allowableValues.type&&a.push(o.name)}}catch(c){l=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(l)throw i}}a.length>0?e.setState({param_enabled:!0,param_list:a,parameter:a[0]}):e.setState({param_enabled:!1,param_list:["No open input parameters!"],parameter:"No open input parameters!"})})}},{key:"componentWillMount",value:function(){var e=this;window.tableau.extensions.initializeDialogAsync().then(function(){g=window.tableau.extensions.dashboardContent.dashboard;var t=window.tableau.extensions.settings.getAll();"true"===t.configured?(e.setState({configured:!0,delimiter:t.delimiter,keepOnDeselect:"true"===t.keepOnDeselect,multiselect:"true"===t.multiselect}),e.testParamSettings()):e.populateParamList()})}},{key:"render",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement("div",{className:"container"},o.createElement("div",null,o.createElement("div",{className:"header"},"Parameter Actions Configuration",o.createElement("div",{className:"tooltip"},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Dialogs_x5F_Info",width:"15",height:"15",viewBox:"0 0 15 15"},o.createElement("rect",{id:"Line",x:"7",y:"6",width:"1",height:"5",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"}),o.createElement("rect",{id:"Dot_2_",x:"7",y:"4",width:"1",height:"1",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"}),o.createElement("path",{id:"Circle",d:"M7.5,1C3.9,1,1,3.9,1,7.5S3.9,14,7.5,14 S14,11.1,14,7.5S11.1,1,7.5,1z M7.5,13C4.5,13,2,10.5,2,7.5C2,4.5,4.5,2,7.5,2S13,4.5,13,7.5C13,10.5,10.5,13,7.5,13z",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"})),o.createElement("span",{className:"tooltiptext"},o.createElement("p",null,"Update a parameter's value based on worksheet selections."),o.createElement("b",null,"How to Use"),o.createElement("ol",null,o.createElement("li",null,"Select a pre-existing parameter for the extension to manipulate."),o.createElement("li",null,"Choose a field to populate the parameter on selection."),o.createElement("li",null,"Choose which worksheet(s) to listen to for selections."),o.createElement("li",null,o.createElement("i",null,"Optional: ")," Choose if you want keep the last selected values after deselection."),o.createElement("li",null,o.createElement("i",null,"Optional: ")," Choose if you want to allow multi-select mode and if so, your delimiter."))))),o.createElement("div",{className:"title"},"Configure Action"),o.createElement(p,{selecting:"parameter",onClick:this.setParam,onClear:this.clearParam,config:this.state.param_config,nextConfig:this.state.field_config,selected:this.state.parameter,enabled:this.state.param_enabled,list:this.state.param_list,onChange:this.paramChange}),o.createElement(p,{selecting:"field",onClick:this.setField,onClear:this.clearField,config:this.state.field_config,nextConfig:this.state.ws_config,selected:this.state.field,enabled:this.state.field_enabled,list:this.state.field_list,onChange:this.fieldChange}),o.createElement("div",{className:"select"},o.createElement("p",null,"Select worksheets for the select action"),o.createElement("div",{className:"scrolly"},this.state.worksheets.map(function(t){return o.createElement("div",{className:"scrollitem",key:t.key},o.createElement(f.Checkbox,{key:t.key,checked:t.included,children:t.worksheet,onChange:e.handleCheckWrapper(t.key)}))}))),o.createElement(f.Checkbox,{checked:this.state.keepOnDeselect,onChange:this.deselectChange,children:"Persist selections on deselect",style:{marginLeft:"11px",marginTop:"12px",display:"flex",alignItems:"center"}}),o.createElement(f.Checkbox,{checked:this.state.multiselect&&"string"===this.state.dataType,onChange:this.multiChange,children:"Allow multiple selections (string parameters only)",style:{marginLeft:"11px",marginTop:"12px",display:"flex",alignItems:"center"},disabled:"string"!==this.state.dataType}),o.createElement("div",{style:{display:this.state.multiselect&&"string"===this.state.dataType?"flex":"none",alignItems:"center",flex:1,textAlign:"right",marginLeft:"30px"}},o.createElement("span",{children:"Use this character as a separator:",style:{marginRight:"5px"}}),o.createElement(f.TextField,{kind:"line",onChange:this.delimiterChange,className:"delimiter-text-field",value:this.state.delimiter,disabled:!this.state.multiselect&&"string"===this.state.dataType,maxLength:1,style:{marginBottom:6,width:20}}))),o.createElement("div",{className:"footer"},o.createElement("div",{className:"btncluster"},o.createElement(f.Button,{kind:"outline",onClick:this.clearSettings,style:{marginRight:"auto"}},"Clear Settings"),o.createElement(f.Button,{kind:"filledGreen",onClick:this.submit,disabled:0===this.state.worksheets.filter(function(e){return!0===e.included}).length,style:{marginLeft:"12px"}},"OK")))))}}]),t}(o.Component),b=(a(133),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement("link",{rel:"stylesheet",type:"text/css",media:"screen",href:"home.css"}),o.createElement("div",{className:"icontainer"},o.createElement("div",{className:"box"},o.createElement("div",{className:"left"},o.createElement("h1",{className:"iheader"},"Parameter Actions Extension"),o.createElement("span",{className:"tagline"},"A Tableau extension that allows you to update parameter values from worksheet selections.")),o.createElement("div",{className:"right"},o.createElement("h4",{className:"big"},"What is it?"),o.createElement("p",null,"With this extension you can simply click on a mark or multiple marsk on a worksheet and update a parameter with those values."),o.createElement("h4",{className:"big"},"Using the Extension"),o.createElement("ol",null,o.createElement("li",null,"Select a pre-existing parameter for the extension to manipulate."),o.createElement("li",null,"Choose a field to populate the parameter on selection."),o.createElement("li",null,"Choose which worksheet(s) to listen to for selections."),o.createElement("li",null,o.createElement("i",null,"Optional: ")," Choose if you want keep the last selected values after deselection."),o.createElement("li",null,o.createElement("i",null,"Optional: ")," Choose if you want to allow multi-select mode and if so, your delimiter.")),o.createElement("div",{className:"gh"},"Get this extension and more in the ",o.createElement("a",{href:"https://extensiongallery.tableau.com/"},"Extension Gallery"),".")))))}}]),t}(o.Component)),k=(a(134),function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,s=new Array(l),o=0;o<l;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).state={configured:!1,mode:"authoring",valid:!1},a.getMarks=function(e){e.getMarksAsync().then(function(e){a.updateParam(e)})},a.configure=function(){var e="".concat(window.location.origin).concat("/extension-parameter-actions","/#/config");window.tableau.extensions.ui.displayDialogAsync(e,"",{height:420,width:420}).then(function(){var e=window.tableau.extensions.settings.getAll();a.setState({configured:!0}),a.validate(e)}).catch(function(e){switch(e.errorCode){case window.tableau.ErrorCodes.DialogClosedByUser:var t=window.tableau.extensions.settings.getAll();"true"===t.configured&&(a.setState({configured:!0}),a.validate(t)),console.log("Dialog was closed by user.");break;default:console.error(e.message)}})},a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"validate",value:function(e){var t=this,a=[];e.parameter&&v.findParameterAsync(e.parameter).then(function(n){if(n&&"all"===n.allowableValues.type){y=n.dataType;var l=JSON.parse(e.worksheets),i=[],r=[];l&&(v.worksheets.filter(function(e){return!!l.find(function(t){return t.worksheet===e.name&&t.included})}).forEach(function(e){e&&(r.push(e.name),i.push(e.getSummaryDataAsync()))}),Promise.all(i).then(function(n){for(var l in n)if(n.hasOwnProperty(l)){var i=!0,s=!1,o=void 0;try{for(var c,u=n[l].columns[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value;d.fieldName===e.field&&d.dataType===y&&a.push(r[l])}}catch(f){s=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}}a.length>0&&(t.setState({valid:!0}),t.listen(a))}))}})}},{key:"listen",value:function(e){var t=this,a=!0,n=!1,l=void 0;try{for(var i,r=v.worksheets[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){i.value.removeEventListener(window.tableau.TableauEventType.MarkSelectionChanged,this.getMarks)}}catch(m){n=!0,l=m}finally{try{a||null==r.return||r.return()}finally{if(n)throw l}}var s=!0,o=!1,c=void 0;try{for(var u,d=function(){var e=u.value,a=v.worksheets.find(function(t){return t.name===e});a.getSelectedMarksAsync().then(function(e){t.updateParam(e)}),a.addEventListener(window.tableau.TableauEventType.MarkSelectionChanged,t.getMarks)},f=e[Symbol.iterator]();!(s=(u=f.next()).done);s=!0)d()}catch(m){o=!0,c=m}finally{try{s||null==f.return||f.return()}finally{if(o)throw c}}}},{key:"updateParam",value:function(e){var t=window.tableau.extensions.settings.getAll(),a=0,n=[],l="",i=!0,r=!1,s=void 0;try{for(var o,c=e.data[0].columns[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;u.fieldName===t.field&&(a=u.index)}}catch(b){r=!0,s=b}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}var d=!0,f=!1,m=void 0;try{for(var h,g=e.data[0].data[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var p=h.value;n.push(p[a].value)}}catch(b){f=!0,m=b}finally{try{d||null==g.return||g.return()}finally{if(f)throw m}}if(n=Array.from(new Set(n)),l="true"===t.multiselect&&"string"===y?n.join(t.delimiter):n[0],"true"!==t.keepOnDeselect||l){if("false"===t.keepOnDeselect&&0===e.data[0].data.length)switch(y){case"float":case"int":l="0";break;case"string":l="";break;case"date":case"date-time":var w=new Date;l=w.getFullYear()+"-"+(w.getMonth()+1)+"-"+w.getDate();break;default:l="0"}v.findParameterAsync(t.parameter).then(function(e){e.changeValueAsync(l)})}}},{key:"componentWillMount",value:function(){var e=this;window.tableau.extensions.initializeAsync({configure:this.configure}).then(function(){v=window.tableau.extensions.dashboardContent.dashboard,e.setState({mode:window.tableau.extensions.environment.mode}),console.log(window.tableau.extensions.environment.mode);var t=window.tableau.extensions.settings.getAll();"true"!==t.configured?e.configure():(e.setState({configured:!0}),e.validate(t))})}},{key:"render",value:function(){var e="Looking for extension configuration.",t="rgba(0, 0, 0, 0.8)";return this.state.configured&&this.state.valid?(e="Extension is configured and valid. This cog will disappear in viewing mode.",t="rgba(0, 0, 0, 0.8)"):this.state.configured?(e="Extension is configured but not valid.",t="#C93A47"):(e="Extension requires configuring",t="#C93A47"),o.createElement("div",{className:"cog "+this.state.mode},o.createElement("div",{style:{color:t},title:"This cog will not show in viewer mode."},o.createElement("svg",{className:"svg-inline--fa fa-cog fa-w-16 fa-2x click",onClick:this.configure,"aria-labelledby":"svg-inline--fa-title-1","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":"true"},o.createElement("path",{fill:"currentColor",d:"M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"}))),o.createElement("div",null,o.createElement("p",null,e)))}}]),t}(o.Component)),E=function(){return o.createElement(o.Fragment,null,o.createElement(u.a,{path:"/",exact:!0,component:b}),o.createElement(u.a,{path:"/paramact",component:k}),o.createElement(u.a,{path:"/config",component:w}))},x=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.createElement(d.a,null,o.createElement(E,null))}}]),t}(o.Component);c.render(o.createElement(x,null),document.getElementById("container"))},73:function(e,t,a){e.exports=a(139)}},[[73,1,2]]]);
//# sourceMappingURL=main.d88334d2.chunk.js.map